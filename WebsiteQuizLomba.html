<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Mata Pelajaran</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root{
            --bg-top: rgba(16,24,40,0.55);
            --accent: #7c3aed;
            --accent-2: #6d28d9;
            --muted: #6b7280;
            --glass: rgba(255,255,255,0.06);
            --card-bg: rgba(255,255,255,0.9);
        }

        body {
            font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-image: linear-gradient(180deg, rgba(10,10,25,0.45), rgba(10,10,25,0.45)), url('./img/BACKGROUNDWEB2.jpg');
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #0b1220;
            min-height: 100vh;
            padding: 36px 20px;
            color: #eef2ff;
            position: relative;
            overflow-x: hidden;
        }

        /* decorative blurred blobs */
        body::before, body::after{
            content: '';
            position: absolute;
            z-index: 0;
            filter: blur(0px);
            opacity: 0;
            transform: translateZ(0);
            display: none;
        }
        body::before{
            width: 420px; height: 420px;
            left: -80px; top: -80px;
            background: linear-gradient(135deg, rgba(124,58,237,0.7), rgba(109,40,217,0.6));
        }
        body::after{
            width: 360px; height: 360px;
            right: -100px; bottom: -100px;
            background: linear-gradient(135deg, rgba(96,165,250,0.18), rgba(124,58,237,0.14));
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 26px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .header h1 {
            font-size: 2.6rem;
            margin-bottom: 6px;
            letter-spacing: -0.02em;
            text-shadow: 0 6px 18px rgba(0,0,0,0.45);
            transform-origin: center;
            animation: floatTitle 4s ease-in-out infinite;
        }

        .header p {
            font-size: 1.05rem;
            opacity: 0.95;
            color: rgba(235,235,245,0.9);
        }


        .logo {
            width: 220px; /* diperbesar sedikit lagi */
            max-width: 36%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 12px 40px rgba(2,6,23,0.6);
            transition: transform 0.45s cubic-bezier(.2,.9,.2,1), box-shadow 0.45s;
        }

        .logo:hover {
            transform: translateY(-8px) rotate(-3deg) scale(1.06);
            box-shadow: 0 28px 60px rgba(92,54,195,0.28);
        }

        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 22px;
            margin-bottom: 28px;
        }

        .subject-card {
            background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
            border-radius: 16px;
            padding: 26px 22px;
            cursor: pointer;
            transition: transform 450ms cubic-bezier(.2,.9,.2,1), box-shadow 450ms, background 450ms, border 450ms;
            box-shadow: 0 8px 30px rgba(6,11,29,0.12);
            text-align: center;
            opacity: 0;
            transform: translateY(18px) scale(.995);
            will-change: transform, opacity;
            animation: cardIn 480ms ease forwards;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .subject-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), var(--accent-2), transparent);
            transform: scaleX(0);
            transform-origin: center;
            transition: transform 450ms cubic-bezier(.2,.9,.2,1);
        }

        .subject-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 28px 60px rgba(124,58,237,0.16), 0 12px 28px rgba(6,11,29,0.12);
            border-color: rgba(124,58,237,0.3);
            background: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(255,255,255,0.95));
        }

        .subject-card:hover::after {
            transform: scaleX(1);
        }

        /* staggered entrance for cards */
        .subject-grid .subject-card:nth-child(1){ animation-delay: 0.06s }
        .subject-grid .subject-card:nth-child(2){ animation-delay: 0.12s }
        .subject-grid .subject-card:nth-child(3){ animation-delay: 0.18s }
        .subject-grid .subject-card:nth-child(4){ animation-delay: 0.24s }
        .subject-grid .subject-card:nth-child(5){ animation-delay: 0.30s }
        .subject-grid .subject-card:nth-child(6){ animation-delay: 0.36s }

        @keyframes cardIn {
            to { opacity: 1; transform: translateY(0) scale(1)}
        }

        .subject-icon {
            font-size: 2.8rem;
            margin-bottom: 12px;
            display: inline-block;
            filter: drop-shadow(0 4px 8px rgba(6,11,29,0.08));
            text-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .subject-card:hover .subject-icon {
            animation: iconBounce 600ms cubic-bezier(.34,1.56,.64,1);
            filter: drop-shadow(0 8px 16px rgba(124,58,237,0.25));
        }

        @keyframes iconBounce {
            0% { transform: scale(1) rotate(0deg) }
            50% { transform: scale(1.18) rotate(-8deg) }
            100% { transform: scale(1) rotate(0deg) }
        }

        /* Special styling for Fisika card to make it more prominent */
        .subject-card:nth-child(2) .subject-icon {
            font-size: 3rem;
            filter: drop-shadow(0 6px 12px rgba(124,58,237,0.12));
        }

        .subject-card:nth-child(2):hover .subject-icon {
            filter: drop-shadow(0 10px 20px rgba(124,58,237,0.3));
        }

        .subject-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .subject-name {
            font-size: 1.15rem;
            font-weight: 600;
            color: #0b1220;
            margin-bottom: 8px;
            transition: color 300ms;
        }

        .subject-card:hover .subject-name {
            color: var(--accent-2);
        }

        .subject-info {
            color: var(--muted);
            font-size: 0.9rem;
            transition: color 300ms;
        }

        .subject-card:hover .subject-info {
            color: var(--accent);
        }

        /* Active (selected) subject styling */
        .subject-card.active {
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: #fff;
            box-shadow: 0 20px 60px rgba(109,40,217,0.28);
            transform: translateY(-8px) scale(1.02);
        }

        .subject-card.active .subject-name,
        .subject-card.active .subject-info {
            color: #fff;
        }

        .quiz-container {
            background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.94));
            border-radius: 14px;
            padding: 36px;
            box-shadow: 0 24px 60px rgba(3,6,23,0.18);
            display: none;
            color: #0b1220;
            transform-origin: top center;
            animation: none;
        }

        /* Timer and Progress Bar Styles */
        .quiz-timer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(124,58,237,0.1), rgba(109,40,217,0.05));
            border-radius: 12px;
            border: 1px solid rgba(124,58,237,0.2);
        }

        .timer-display {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--accent-2);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-display.warning {
            color: #f59e0b;
        }

        .timer-display.danger {
            color: #ef4444;
        }

        .hint-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .hint-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 220ms ease, box-shadow 220ms ease;
            box-shadow: 0 8px 20px rgba(245,158,11,0.2);
        }

        .hint-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(245,158,11,0.3);
        }

        .hint-btn:disabled {
            background: #d1d5db;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .hint-counter {
            font-size: 0.9rem;
            color: #666;
            font-weight: 600;
        }

        .progress-bar-container {
            margin-bottom: 24px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(11,17,32,0.1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
            font-weight: 600;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(11,17,32,0.06);
        }

        .quiz-title {
            font-size: 1.45rem;
            color: var(--accent-2);
            font-weight: 600;
        }

        .back-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .question-counter {
            text-align: center;
            font-size: 1.1em;
            color: #666;
            margin-bottom: 20px;
        }

        .question-box {
            background: #ffffff;
            padding: 22px 20px;
            border-radius: 12px;
            margin-bottom: 18px;
            box-shadow: 0 10px 30px rgba(6,11,29,0.06);
            transition: transform 360ms ease, opacity 360ms ease;
        }

        .question-box.animate {
            animation: questionIn 360ms ease;
        }

        @keyframes questionIn {
            from { transform: translateY(12px); opacity: 0 }
            to { transform: translateY(0); opacity: 1 }
        }

        .question-text {
            font-size: 1.15rem;
            color: #0b1220;
            margin-bottom: 14px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #fbfbff;
            padding: 14px 18px;
            border-radius: 10px;
            border: 1px solid rgba(11,17,32,0.06);
            cursor: pointer;
            transition: transform 220ms ease, box-shadow 220ms ease, background 220ms;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 6px 18px rgba(11,17,32,0.04);
        }

        .option:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 36px rgba(11,17,32,0.08);
        }

        .option.selected {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            border-color: transparent;
            box-shadow: 0 16px 40px rgba(109,40,217,0.14);
            transform: translateY(-2px);
        }

        /* Correct / Wrong states for options */
        .option.correct {
            background: linear-gradient(90deg, #10b981, #059669);
            color: white;
            border-color: transparent;
            box-shadow: 0 12px 36px rgba(6,95,70,0.12);
            transform: translateY(-2px);
        }

        .option.wrong {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            border-color: transparent;
            box-shadow: 0 12px 36px rgba(139,34,34,0.12);
            transform: translateY(-2px);
        }

        .option.disabled {
            opacity: 0.7;
            cursor: default;
            pointer-events: none;
            filter: saturate(0.96);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 12px;
        }

        .nav-btn {
            padding: 12px 28px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 220ms ease, box-shadow 220ms ease;
            box-shadow: 0 8px 24px rgba(11,17,32,0.06);
        }

        .prev-btn {
            background: #111827;
            color: white;
        }

        .next-btn, .finish-btn {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            box-shadow: 0 16px 40px rgba(109,40,217,0.14);
        }

        .nav-btn:hover {
            transform: translateY(-6px);
        }

        .nav-btn:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-container {
            display: none;
            text-align: center;
            padding: 36px;
        }

        .result-score {
            font-size: 4.4rem;
            color: var(--accent-2);
            margin: 18px 0;
            font-weight: 700;
            letter-spacing: -0.01em;
            text-shadow: 0 8px 28px rgba(109,40,217,0.12);
        }

        .result-message {
            font-size: 1.15rem;
            color: #0b1220;
            margin-bottom: 18px;
        }

        .restart-btn {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            border: none;
            padding: 12px 34px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 16px 40px rgba(109,40,217,0.14);
            transition: transform 220ms ease;
        }

        .restart-btn:hover {
            transform: translateY(-6px);
        }

        /* Dashboard button and modal */
        .menu-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            border: none;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 12px 30px rgba(109,40,217,0.25);
            transition: transform 220ms ease, box-shadow 220ms ease;
            z-index: 10;
        }

        .menu-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 40px rgba(109,40,217,0.35);
        }

        .dashboard-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 50;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .dashboard-modal.active {
            display: flex;
        }

        .dashboard-content {
            background: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(255,255,255,0.95));
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            color: #0b1220;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 28px 60px rgba(0,0,0,0.3);
            animation: slideIn 300ms ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-30px); opacity: 0 }
            to { transform: translateY(0); opacity: 1 }
        }

        /* Centered confirmation modal (custom) */
        .confirm-modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(2,6,23,0.5);
            z-index: 120;
            padding: 24px;
        }

        .confirm-modal.active { display: flex; }

        .confirm-content {
            background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));
            color: #0b1220;
            width: 100%;
            max-width: 480px;
            border-radius: 12px;
            padding: 22px 20px;
            box-shadow: 0 28px 80px rgba(2,6,23,0.38);
            text-align: center;
            animation: confirmIn 220ms ease;
        }

        @keyframes confirmIn { from { transform: translateY(-10px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }

        .confirm-title { font-size: 1.15rem; font-weight: 700; color: var(--accent-2); margin-bottom: 8px }
        .confirm-message { color: #333; margin-bottom: 18px; line-height: 1.4 }

        .confirm-buttons { display:flex; gap:12px; justify-content:center }
        .confirm-btn { padding: 10px 18px; border-radius: 10px; border: none; cursor: pointer; font-weight: 600 }
        .confirm-btn.secondary { background: #eef2ff; color: #333 }
        .confirm-btn.primary { background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: white }


        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(11,17,32,0.1);
            padding-bottom: 12px;
        }

        .dashboard-header h2 {
            font-size: 1.5rem;
            color: var(--accent-2);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.6rem;
            color: #666;
            cursor: pointer;
            transition: color 160ms;
        }

        .close-btn:hover { color: #333; }

        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(124,58,237,0.08), rgba(109,40,217,0.04));
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(124,58,237,0.2);
        }

        .stat-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--accent-2);
        }

        .history-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-top: 20px;
            margin-bottom: 12px;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
        }

        .history-item {
            background: rgba(11,17,32,0.04);
            padding: 10px 12px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            font-size: 0.95rem;
        }

        .history-subject { font-weight: 600; color: var(--accent-2); }
        .history-score { color: #666; }

        .clear-btn {
            width: 100%;
            padding: 10px;
            margin-top: 14px;
            background: #e5e7eb;
            border: none;
            border-radius: 8px;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: background 160ms;
        }

        .clear-btn:hover { background: #d1d5db; }

        @media (max-width: 820px) {
            .header h1 { font-size: 1.9rem }
            .subject-grid { grid-template-columns: 1fr }
            .quiz-container { padding: 18px }
            .logo { width: 140px; max-width: 55% }
            .menu-btn { top: 12px; right: 12px; width: 44px; height: 44px; }
            .profile-btn { top: 12px; left: 12px; width: 44px; height: 44px; font-size: 1rem; }
        }

        @keyframes floatTitle {
            0%{ transform: translateY(0) }
            50%{ transform: translateY(-6px) }
            100%{ transform: translateY(0) }
        }

        @keyframes cardPulse {
            0%{ box-shadow: 0 8px 28px rgba(6,11,29,0.06) }
            50%{ box-shadow: 0 22px 48px rgba(6,11,29,0.08) }
            100%{ box-shadow: 0 8px 28px rgba(6,11,29,0.06) }
        }

        /* Login Panel Styling */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            position: fixed;
            inset: 0;
            background: linear-gradient(180deg, rgba(10,10,25,0.5), rgba(10,10,25,0.5)), url('./img/BACKGROUNDWEB2.jpg');
            background-attachment: fixed;
            background-size: cover;
            z-index: 100;
        }

        .login-container.hidden { display: none; }

        .login-box {
            background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));
            border-radius: 16px;
            padding: 40px 36px;
            max-width: 420px;
            width: 100%;
            box-shadow: 0 28px 80px rgba(2,6,23,0.4);
            animation: loginSlideIn 500ms cubic-bezier(.2,.9,.2,1);
        }

        @keyframes loginSlideIn {
            from { transform: translateY(20px); opacity: 0 }
            to { transform: translateY(0); opacity: 1 }
        }

        .login-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .login-header .logo-login {
            width: 110px;
            height: 110px;
            margin: 0 auto 20px;
            border-radius: 14px;
            box-shadow: 0 12px 32px rgba(124,58,237,0.2);
            display: block;
            object-fit: cover;
            border: 3px solid rgba(124,58,237,0.1);
        }

        .login-header h1 {
            font-size: 1.8rem;
            color: #0b1220;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .login-header p {
            font-size: 0.95rem;
            color: #666;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 0.95rem;
            font-weight: 600;
            color: #0b1220;
        }

        .form-group input {
            padding: 12px 16px;
            border: 2px solid rgba(11,17,32,0.1);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI';
            transition: border 250ms, box-shadow 250ms;
            background: #ffffff;
            color: #0b1220;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
        }

        .form-group input::placeholder {
            color: #999;
        }

        .login-btn {
            padding: 14px 24px;
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 220ms ease, box-shadow 220ms ease;
            box-shadow: 0 12px 36px rgba(109,40,217,0.2);
            margin-top: 8px;
        }

        .login-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 48px rgba(109,40,217,0.3);
        }

        .login-btn:active {
            transform: translateY(-2px);
        }

        .login-error {
            color: #ef4444;
            font-size: 0.9rem;
            text-align: center;
            margin-top: -8px;
            display: none;
        }

        .login-error.show { display: block; }

        .quiz-view {
            position: relative;
            z-index: 2;
        }

        .quiz-view.hidden { display: none; }

        /* Profile Panel */
        .profile-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            border: none;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: 0 12px 30px rgba(124,58,237,0.25);
            transition: transform 220ms ease, box-shadow 220ms ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .profile-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 40px rgba(124,58,237,0.35);
        }

        .profile-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 50;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .profile-modal.active {
            display: flex;
        }

        .profile-content {
            background: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(255,255,255,0.95));
            border-radius: 16px;
            padding: 32px;
            max-width: 380px;
            width: 90%;
            color: #0b1220;
            box-shadow: 0 28px 60px rgba(0,0,0,0.3);
            animation: slideIn 300ms ease;
            text-align: center;
        }

        .profile-header {
            margin-bottom: 24px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.4rem;
            margin: 0 auto 16px;
            box-shadow: 0 8px 20px rgba(124,58,237,0.2);
        }

        .profile-username {
            font-size: 1.4rem;
            font-weight: 700;
            color: #0b1220;
            margin-bottom: 4px;
        }

        .profile-label {
            font-size: 0.85rem;
            color: #999;
        }

        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .profile-close-btn {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: #999;
            cursor: pointer;
            position: absolute;
            top: 16px;
            right: 16px;
            transition: color 160ms;
        }

        .profile-close-btn:hover {
            color: #333;
        }

        .logout-btn {
            padding: 12px 24px;
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 220ms ease, box-shadow 220ms ease;
            box-shadow: 0 8px 20px rgba(239,68,68,0.2);
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(239,68,68,0.3);
        }

    </style>
</head>
<body>
    <!-- Login Panel -->
    <div id="loginContainer" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <img src="./img/logosma.png" alt="Logo SMA" class="logo-login">
                <h1>Quiz Mata Pelajaran</h1>
                <p>Masuk untuk memulai</p>
            </div>
            <form class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Masukkan username" required>
                </div>
                <div class="login-error" id="loginError">Masukkan username terlebih dahulu</div>
                <button type="submit" class="login-btn">Masuk</button>
            </form>
        </div>
    </div>

    <!-- Quiz View -->
    <div id="quizView" class="quiz-view hidden">
    <!-- Profile button -->
    <button class="profile-btn" onclick="toggleProfile()" title="Profile">üßë‚Äçüéì</button>

    <!-- Profile modal -->
    <div id="profileModal" class="profile-modal" onclick="closeProfileIfClickedOutside(event)">
        <div class="profile-content" onclick="event.stopPropagation()">
            <button class="profile-close-btn" onclick="toggleProfile()">‚úï</button>
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">üë®‚Äçüéì</div>
                <div class="profile-username" id="profileUsername">Username</div>
                <div class="profile-label">Peserta Quiz</div>
            </div>
            <div class="profile-actions">
                <button class="logout-btn" onclick="handleLogout()">Keluar</button>
            </div>
        </div>
    </div>

    <!-- Menu button -->
    <button class="menu-btn" onclick="toggleDashboard()">üìä</button>

    <!-- Dashboard modal -->
    <div id="dashboardModal" class="dashboard-modal" onclick="closeDashboardIfClickedOutside(event)">
        <div class="dashboard-content" onclick="event.stopPropagation()">
            <div class="dashboard-header">
                <h2>üìä Dashboard</h2>
                <button class="close-btn" onclick="toggleDashboard()">‚úï</button>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-label">Total Percobaan</div>
                    <div class="stat-value" id="totalAttempts">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Rata-rata Skor</div>
                    <div class="stat-value" id="avgScore">0%</div>
                </div>
            </div>

            <div class="history-title">üìù Riwayat Kuis Terakhir</div>
            <div class="history-list" id="historyList">
                <div style="text-align: center; color: #999; padding: 10px;">Belum ada riwayat</div>
            </div>

            <button class="clear-btn" onclick="clearHistory()">Hapus Riwayat</button>
        </div>
    </div>

    <!-- Custom centered confirm modal -->
    <div id="confirmModal" class="confirm-modal" aria-hidden="true">
        <div class="confirm-content" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
            <div id="confirmTitle" class="confirm-title">Konfirmasi</div>
            <div id="confirmMessage" class="confirm-message">Anda yakin memilih jawaban ini?</div>
            <div class="confirm-buttons">
                <button id="confirmCancel" class="confirm-btn secondary">Batal</button>
                <button id="confirmAccept" class="confirm-btn primary">Ya, Pilih</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <img src="./img/logosma.png" alt="Logo SMA" class="logo">
            <h1> Quiz Mata Pelajaran</h1>
            <p>Pilih mata pelajaran dan uji pengetahuanmu!</p>
        </div>

        <div id="subjectSelection" class="subject-grid">
            <div class="subject-card" onclick="startQuiz('matematika')">
                <div class="subject-icon">üìê</div>
                <div class="subject-name">Matematika</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('fisika')">
                <div class="subject-icon">‚öõÔ∏è</div>
                <div class="subject-name">Fisika</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('sejarah')">
                <div class="subject-icon">üìú</div>
                <div class="subject-name">Sejarah</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('informatika')">
                <div class="subject-icon">üíª</div>
                <div class="subject-name">Informatika</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('indonesia')">
                <div class="subject-icon">üìñ</div>
                <div class="subject-name">Bahasa Indonesia</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('inggris')">
                <div class="subject-icon">üåç</div>
                <div class="subject-name">Bahasa Inggris</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('ppkn')">
                <div class="subject-icon">üèõÔ∏è</div>
                <div class="subject-name">PPKN</div>
                <div class="subject-info">20 Soal</div>
            </div>
            <div class="subject-card" onclick="startQuiz('ekonomi')">
                <div class="subject-icon">üìà</div>
                <div class="subject-name">Ekonomi</div>
                <div class="subject-info">20 Soal</div>
            </div>
        </div>

        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <div class="quiz-title" id="quizTitle"></div>
                <button class="back-btn" onclick="backToMenu()">Kembali</button>
            </div>
            
            <div class="question-counter" id="questionCounter"></div>
            
            <div class="question-box">
                <div class="question-text" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn prev-btn" id="prevBtn" onclick="previousQuestion()">Sebelumnya</button>
                <button class="nav-btn next-btn" id="nextBtn" onclick="nextQuestion()">Selanjutnya</button>
                <button class="nav-btn finish-btn" id="finishBtn" onclick="finishQuiz()" style="display:none;">Selesai</button>
            </div>
        </div>

        <div id="resultContainer" class="result-container quiz-container">
            <h2>üéâ Quiz Selesai!</h2>
            <div class="result-score" id="resultScore"></div>
            <div class="result-message" id="resultMessage"></div>
            <button class="restart-btn" onclick="backToMenu()">Kembali ke Menu</button>
        </div>
    </div>

    <script>
        const quizData = {
            matematika: [
                { q: "Berapa hasil dari 15 √ó 8?", o: ["120", "125", "130", "115"], a: 0 },
                { q: "Jika x + 5 = 12, berapa nilai x?", o: ["5", "6", "7", "8"], a: 2 },
                { q: "Berapa akar kuadrat dari 144?", o: ["10", "11", "12", "13"], a: 2 },
                { q: "Berapa hasil dari 2¬≥ + 3¬≤?", o: ["15", "16", "17", "18"], a: 2 },
                { q: "Luas persegi dengan sisi 9 cm adalah?", o: ["72 cm¬≤", "81 cm¬≤", "90 cm¬≤", "99 cm¬≤"], a: 1 },
                { q: "Berapa 25% dari 200?", o: ["40", "50", "60", "70"], a: 1 },
                { q: "Jika 3x = 24, berapa x?", o: ["6", "7", "8", "9"], a: 2 },
                { q: "Berapa keliling lingkaran dengan jari-jari 7 cm? (œÄ = 22/7)", o: ["38 cm", "42 cm", "44 cm", "48 cm"], a: 2 },
                { q: "Hasil dari 100 √∑ 4 - 5 adalah?", o: ["15", "20", "25", "30"], a: 1 },
                { q: "Berapa volume kubus dengan sisi 5 cm?", o: ["100 cm¬≥", "115 cm¬≥", "125 cm¬≥", "150 cm¬≥"], a: 2 },
                { q: "Berapa hasil dari 7¬≤ - 3¬≤?", o: ["36", "38", "40", "42"], a: 2 },
                { q: "Jika a = 4 dan b = 3, berapa a¬≤ + b¬≤?", o: ["20", "23", "25", "27"], a: 2 },
                { q: "Berapa sisi pada segitiga?", o: ["2", "3", "4", "5"], a: 1 },
                { q: "Hasil dari 15 + 8 √ó 2 adalah?", o: ["31", "32", "33", "46"], a: 0 },
                { q: "Berapa luas segitiga dengan alas 10 cm dan tinggi 6 cm?", o: ["25 cm¬≤", "30 cm¬≤", "35 cm¬≤", "40 cm¬≤"], a: 1 },
                { q: "Berapa hasil dari ‚àö(81 + 19)?", o: ["8", "9", "10", "11"], a: 2 },
                { q: "Jika 2x + 3 = 15, berapa x?", o: ["4", "5", "6", "7"], a: 2 },
                { q: "Berapa sudut dalam segitiga sama sisi?", o: ["45¬∞", "60¬∞", "90¬∞", "120¬∞"], a: 1 },
                { q: "Hasil dari 0,5 √ó 60 adalah?", o: ["20", "25", "30", "35"], a: 2 },
                { q: "Berapa jumlah sisi pada segi enam?", o: ["4", "5", "6", "8"], a: 2 }
            ],
            fisika: [
                { q: "Satuan SI untuk massa adalah?", o: ["Gram", "Kilogram", "Newton", "Joule"], a: 1 },
                { q: "Rumus energi kinetik adalah?", o: ["¬Ωmv", "¬Ωmv¬≤", "mv¬≤", "m¬≤v"], a: 1 },
                { q: "Percepatan gravitasi bumi adalah?", o: ["8,8 m/s¬≤", "9,8 m/s¬≤", "10,8 m/s¬≤", "11,8 m/s¬≤"], a: 1 },
                { q: "Hukum Newton ke-1 disebut juga?", o: ["Hukum Inersia", "Hukum Aksi-Reaksi", "Hukum Gravitasi", "Hukum Energi"], a: 0 },
                { q: "Satuan gaya dalam SI adalah?", o: ["Joule", "Watt", "Newton", "Pascal"], a: 2 },
                { q: "Kecepatan cahaya dalam vakum adalah?", o: ["3 √ó 10‚Å∂ m/s", "3 √ó 10‚Å∑ m/s", "3 √ó 10‚Å∏ m/s", "3 √ó 10‚Åπ m/s"], a: 2 },
                { q: "Rumus tekanan adalah?", o: ["F √ó A", "F / A", "F + A", "F - A"], a: 1 },
                { q: "Titik didih air pada tekanan normal adalah?", o: ["90¬∞C", "95¬∞C", "100¬∞C", "105¬∞C"], a: 2 },
                { q: "Energi tidak dapat diciptakan atau dimusnahkan, ini adalah bunyi dari?", o: ["Hukum Newton", "Hukum Kekekalan Energi", "Hukum Gravitasi", "Hukum Archimedes"], a: 1 },
                { q: "Satuan daya listrik adalah?", o: ["Volt", "Ampere", "Watt", "Ohm"], a: 2 },
                { q: "Rumus momentum adalah?", o: ["m √ó v", "m √ó a", "F √ó t", "m √∑ v"], a: 0 },
                { q: "Gelombang bunyi termasuk gelombang?", o: ["Transversal", "Longitudinal", "Elektromagnetik", "Mekanik saja"], a: 1 },
                { q: "Satuan frekuensi adalah?", o: ["Meter", "Hertz", "Joule", "Watt"], a: 1 },
                { q: "Titik beku air adalah?", o: ["-5¬∞C", "0¬∞C", "5¬∞C", "10¬∞C"], a: 1 },
                { q: "Hukum Ohm berbunyi?", o: ["V = I √ó R", "V = I / R", "V = I + R", "V = R / I"], a: 0 },
                { q: "Alat untuk mengukur arus listrik adalah?", o: ["Voltmeter", "Ampere meter", "Ohmmeter", "Thermometer"], a: 1 },
                { q: "Induksi elektromagnetik ditemukan oleh?", o: ["Newton", "Einstein", "Faraday", "Tesla"], a: 2 },
                { q: "Kalor jenis air adalah?", o: ["4200 J/kg¬∞C", "4000 J/kg¬∞C", "3800 J/kg¬∞C", "3600 J/kg¬∞C"], a: 0 },
                { q: "Lensa cembung bersifat?", o: ["Menyebarkan cahaya", "Mengumpulkan cahaya", "Memantulkan cahaya", "Menyerap cahaya"], a: 1 },
                { q: "Massa jenis air adalah?", o: ["900 kg/m¬≥", "950 kg/m¬≥", "1000 kg/m¬≥", "1050 kg/m¬≥"], a: 2 }
            ],
            sejarah: [
                { q: "Proklamasi kemerdekaan Indonesia dibacakan pada tanggal?", o: ["16 Agustus 1945", "17 Agustus 1945", "18 Agustus 1945", "19 Agustus 1945"], a: 1 },
                { q: "Presiden pertama Indonesia adalah?", o: ["Soeharto", "Soekarno", "Habibie", "SBY"], a: 1 },
                { q: "Organisasi pemuda yang mempelopori Sumpah Pemuda adalah?", o: ["Budi Utomo", "Perhimpunan Indonesia", "Jong Java", "Semua benar"], a: 3 },
                { q: "Sumpah Pemuda diadakan pada tahun?", o: ["1926", "1927", "1928", "1929"], a: 2 },
                { q: "Kerajaan maritim terbesar di Nusantara adalah?", o: ["Majapahit", "Sriwijaya", "Mataram", "Demak"], a: 1 },
                { q: "VOC didirikan pada tahun?", o: ["1500", "1602", "1700", "1800"], a: 1 },
                { q: "Perang Diponegoro terjadi pada tahun?", o: ["1825-1830", "1830-1835", "1835-1840", "1840-1845"], a: 0 },
                { q: "Penjajah pertama yang datang ke Indonesia adalah?", o: ["Inggris", "Belanda", "Portugis", "Jepang"], a: 2 },
                { q: "Konferensi Meja Bundar diadakan di?", o: ["Jakarta", "Den Haag", "Amsterdam", "London"], a: 1 },
                { q: "Hari Pahlawan diperingati setiap tanggal?", o: ["10 Oktober", "10 November", "17 Agustus", "1 Juni"], a: 1 },
                { q: "Siapa yang menjahit bendera merah putih pertama?", o: ["Fatmawati", "Kartini", "Dewi Sartika", "Cut Nyak Dien"], a: 0 },
                { q: "BPUPKI dibentuk pada tanggal?", o: ["29 April 1945", "1 Mei 1945", "28 Mei 1945", "1 Juni 1945"], a: 2 },
                { q: "Piagam Jakarta disahkan pada tanggal?", o: ["18 Juni 1945", "22 Juni 1945", "1 Juli 1945", "17 Agustus 1945"], a: 1 },
                { q: "Peristiwa Rengasdengklok terjadi pada tanggal?", o: ["14 Agustus 1945", "15 Agustus 1945", "16 Agustus 1945", "17 Agustus 1945"], a: 2 },
                { q: "Candi Borobudur dibangun pada masa kerajaan?", o: ["Majapahit", "Mataram Kuno", "Singasari", "Sriwijaya"], a: 1 },
                { q: "Pertempuran Surabaya terjadi pada tanggal?", o: ["10 Oktober 1945", "10 November 1945", "17 Agustus 1945", "1 Juni 1945"], a: 1 },
                { q: "Sistem tanam paksa diberlakukan oleh?", o: ["Daendels", "Van den Bosch", "Raffles", "JP Coen"], a: 1 },
                { q: "Pelopor pendidikan wanita Indonesia adalah?", o: ["Cut Nyak Dien", "RA Kartini", "Dewi Sartika", "Christina Martha Tiahahu"], a: 1 },
                { q: "Agresi Militer Belanda I terjadi pada tahun?", o: ["1945", "1946", "1947", "1948"], a: 2 },
                { q: "Siapa tokoh yang mengusulkan Pancasila?", o: ["Mohammad Hatta", "Soekarno", "Soepomo", "Tan Malaka"], a: 1 }
            ],
            informatika: [
                { q: "Kepanjangan dari CPU adalah?", o: ["Central Processing Unit", "Computer Processing Unit", "Central Program Unit", "Computer Program Unit"], a: 0 },
                { q: "Bahasa pemrograman untuk web yang berjalan di browser adalah?", o: ["Python", "Java", "JavaScript", "C++"], a: 2 },
                { q: "Satuan terkecil dalam komputer adalah?", o: ["Byte", "Bit", "Kilobyte", "Megabyte"], a: 1 },
                { q: "1 Byte sama dengan berapa Bit?", o: ["4", "6", "8", "10"], a: 2 },
                { q: "Protokol untuk transfer file di internet adalah?", o: ["HTTP", "FTP", "SMTP", "TCP"], a: 1 },
                { q: "RAM adalah singkatan dari?", o: ["Random Access Memory", "Read Access Memory", "Random Active Memory", "Read Active Memory"], a: 0 },
                { q: "Sistem bilangan yang digunakan komputer adalah?", o: ["Desimal", "Biner", "Oktal", "Heksadesimal"], a: 1 },
                { q: "Perangkat keras untuk menampilkan output adalah?", o: ["Keyboard", "Mouse", "Monitor", "Scanner"], a: 2 },
                { q: "Software yang mengatur hardware adalah?", o: ["Aplikasi", "Sistem Operasi", "Browser", "Driver"], a: 1 },
                { q: "Bahasa markup untuk membuat halaman web adalah?", o: ["CSS", "JavaScript", "HTML", "PHP"], a: 2 },
                { q: "IP Address versi 4 terdiri dari berapa oktet?", o: ["2", "4", "6", "8"], a: 1 },
                { q: "Algoritma pengurutan data dari kecil ke besar disebut?", o: ["Sorting", "Searching", "Hashing", "Indexing"], a: 0 },
                { q: "Database yang paling populer adalah?", o: ["MySQL", "Oracle", "MongoDB", "PostgreSQL"], a: 0 },
                { q: "Perangkat keras untuk menyimpan data permanen adalah?", o: ["RAM", "ROM", "Hard Disk", "Cache"], a: 2 },
                { q: "Topologi jaringan berbentuk lingkaran adalah?", o: ["Star", "Ring", "Bus", "Mesh"], a: 1 },
                { q: "Serangan cyber dengan membanjiri server disebut?", o: ["Phishing", "DDoS", "Malware", "Spyware"], a: 1 },
                { q: "Port default untuk HTTP adalah?", o: ["21", "22", "80", "443"], a: 2 },
                { q: "Ekstensi file untuk gambar adalah?", o: [".txt", ".doc", ".jpg", ".exe"], a: 2 },
                { q: "Kepanjangan dari URL adalah?", o: ["Universal Resource Locator", "Uniform Resource Locator", "Universal Reference Locator", "Uniform Reference Locator"], a: 1 },
                { q: "Struktur data LIFO menggunakan?", o: ["Queue", "Stack", "Tree", "Graph"], a: 1 }
            ],
            indonesia: [
                { q: "Kata baku dari 'aktifitas' adalah?", o: ["Aktivitas", "Aktifitas", "Aktipitas", "Aktivitaz"], a: 0 },
                { q: "Imbuhan 'me-' pada kata 'menulis' berfungsi sebagai?", o: ["Awalan", "Akhiran", "Sisipan", "Gabungan"], a: 0 },
                { q: "Kalimat yang memiliki subjek dan predikat disebut kalimat?", o: ["Majemuk", "Tunggal", "Kompleks", "Sederhana"], a: 1 },
                { q: "Sinonim dari kata 'rajin' adalah?", o: ["Malas", "Tekun", "Lambat", "Ceroboh"], a: 1 },
                { q: "Antonim dari kata 'tinggi' adalah?", o: ["Besar", "Kecil", "Rendah", "Lebar"], a: 2 },
                { q: "Puisi dengan 4 baris dalam setiap baitnya disebut?", o: ["Distikon", "Terzina", "Kuatrain", "Soneta"], a: 2 },
                { q: "Kata 'membaca' termasuk kata?", o: ["Benda", "Kerja", "Sifat", "Bilangan"], a: 1 },
                { q: "Huruf kapital digunakan pada awal?", o: ["Kata sifat", "Nama orang", "Kata kerja", "Kata keterangan"], a: 1 },
                { q: "Kalimat tanya menggunakan tanda baca?", o: ["Titik", "Koma", "Tanya", "Seru"], a: 2 },
                { q: "Kata ganti orang pertama tunggal adalah?", o: ["Kami", "Kamu", "Saya", "Mereka"], a: 2 },
                { q: "Majas yang membandingkan menggunakan kata 'seperti' adalah?", o: ["Metafora", "Simile", "Hiperbola", "Personifikasi"], a: 1 },
                { q: "Paragraf yang kalimat utamanya di awal disebut?", o: ["Induktif", "Deduktif", "Campuran", "Naratif"], a: 1 },
                { q: "Kata 'pergi' termasuk kata dasar atau kata?", o: ["Berimbuhan", "Majemuk", "Ulang", "Dasar"], a: 3 },
                { q: "Karya sastra yang berbentuk prosa naratif panjang adalah?", o: ["Cerpen", "Novel", "Puisi", "Drama"], a: 1 },
                { q: "Pantun terdiri dari berapa baris?", o: ["2", "3", "4", "5"], a: 2 },
                { q: "Dua baris pertama pada pantun disebut?", o: ["Isi", "Sampiran", "Makna", "Rima"], a: 1 },
                { q: "Kata tanya untuk menanyakan waktu adalah?", o: ["Siapa", "Dimana", "Kapan", "Mengapa"], a: 2 },
                { q: "Penggalan cerita rakyat yang disampaikan turun temurun disebut?", o: ["Mitos", "Legenda", "Fabel", "Sage"], a: 1 },
                { q: "Kalimat langsung menggunakan tanda petik?", o: ["Satu", "Dua", "Tiga", "Tidak ada"], a: 1 },
                { q: "Kata 'cantik' termasuk kata?", o: ["Benda", "Kerja", "Sifat", "Bilangan"], a: 2 }
            ],
            inggris: [
                { q: "What is the past tense of 'go'?", o: ["Goed", "Went", "Gone", "Going"], a: 1 },
                { q: "Which is correct? 'He _ a student.'", o: ["am", "is", "are", "be"], a: 1 },
                { q: "What is the plural of 'child'?", o: ["Childs", "Children", "Childes", "Childrens"], a: 1 },
                { q: "'She has been working' is an example of?", o: ["Simple Present", "Present Continuous", "Present Perfect Continuous", "Past Perfect"], a: 2 },
                { q: "What is the opposite of 'hot'?", o: ["Warm", "Cool", "Cold", "Freeze"], a: 2 },
                { q: "Which article is used before vowel sounds?", o: ["A", "An", "The", "No article"], a: 1 },
                { q: "What is the comparative form of 'good'?", o: ["Gooder", "More good", "Better", "Best"], a: 2 },
                { q: "'I _ to school every day.'", o: ["go", "goes", "gone", "going"], a: 0 },
                { q: "What color is the sky on a clear day?", o: ["Blue", "Green", "Yellow", "Red"], a: 0 },
                { q: "What is the opposite of 'happy'?", o: ["Sad", "Angry", "Excited", "Tired"], a: 0 },
                { q: "Translate: 'Saya suka apel.'", o: ["I like apple", "I like apples", "I likes apple", "I liking apple"], a: 1 },
                { q: "Which one is a verb?", o: ["Table", "Run", "Blue", "Hot"], a: 1 },
                { q: "What is the superlative form of 'big'?", o: ["Bigger", "Biggest", "Most big", "More big"], a: 1 },
                { q: "What is 'thank you' in Indonesian?", o: ["Halo", "Terima kasih", "Selamat datang", "Selamat pagi"], a: 1 },
                { q: "How do you say 'rumah' in English?", o: ["Home", "Room", "House", "Building"], a: 2 },
                { q: "Which pronoun is correct for 'Andi and I'?", o: ["They", "He", "We", "You"], a: 2 },
                { q: "Choose the correct form: 'She _ reading a book.'", o: ["am", "is", "are", "be"], a: 1 }
            ],
            ppkn: [
                { q: "Pancasila adalah dasar negara Indonesia yang terdiri dari berapa sila?", o: ["3", "4", "5", "6"], a: 2 },
                { q: "Sila pertama Pancasila berbunyi?", o: ["Kemanusiaan yang adil dan beradab", "Ketuhanan Yang Maha Esa", "Persatuan Indonesia", "Kerakyatan yang dipimpin hikmat kebijaksanaan"], a: 1 },
                { q: "UUD 1945 telah diamandemen berapa kali?", o: ["1", "2", "3", "4"], a: 3 },
                { q: "Berapa jumlah pasal dalam UUD 1945?", o: ["32", "36", "37", "40"], a: 2 },
                { q: "Siapa yang menjadi Presiden Indonesia yang pertama?", o: ["Mohammad Hatta", "Soekarno", "Soeharto", "BJ Habibie"], a: 1 },
                { q: "Lambang negara Indonesia adalah?", o: ["Burung Garuda", "Burung Elang", "Burung Phoenix", "Burung Merak"], a: 0 },
                { q: "Apa semboyan negara Indonesia yang tertulis pada pita lambang Garuda?", o: ["Bhinneka Tunggal Ika", "Bersatu Kita Teguh", "Satu Nusa Satu Bangsa", "Bhineka Tunggal Eka"], a: 0 },
                { q: "Warna bendera Indonesia terdiri dari?", o: ["Merah, putih, biru", "Merah dan putih", "Merah, putih, kuning", "Putih, biru, merah"], a: 1 },
                { q: "Ibu kota negara Indonesia adalah?", o: ["Jakarta", "Bandung", "Surabaya", "Yogyakarta"], a: 0 },
                { q: "Hak asasi manusia dijamin dalam pasal berapa UUD 1945?", o: ["Pasal 27", "Pasal 28", "Pasal 29", "Pasal 30"], a: 1 },
                { q: "Sila keempat Pancasila berbunyi?", o: ["Persatuan Indonesia", "Kerakyatan yang dipimpin hikmat kebijaksanaan", "Keadilan sosial bagi seluruh rakyat Indonesia", "Ketuhanan Yang Maha Esa"], a: 1 },
                { q: "Negara Indonesia adalah negara hukum yang?", o: ["Mutlak", "Demokratis", "Diktatorial", "Totaliter"], a: 1 },
                { q: "Lembaga tertinggi negara menurut UUD 1945 adalah?", o: ["DPR", "MPR", "Presiden", "Mahkamah Agung"], a: 1 },
                { q: "DPR merupakan singkatan dari?", o: ["Dewan Penguasa Rakyat", "Dewan Perwakilan Rakyat", "Dewan Pembuat Regulasi", "Dewan Pelaksana Republik"], a: 1 },
                { q: "Siapa wakil rakyat di MPR disebut?", o: ["Anggota DPR", "Wakil Rakyat", "Delegasi", "Utusan Daerah"], a: 0 },
                { q: "Masa jabatan Presiden adalah?", o: ["4 tahun", "5 tahun", "6 tahun", "7 tahun"], a: 0 },
                { q: "Berapa kali seorang presiden dapat dipilih berturut-turut?", o: ["1 kali", "2 kali", "3 kali", "Tanpa batas"], a: 1 },
                { q: "Kewajiban setiap warga negara adalah?", o: ["Membayar pajak saja", "Ikut serta dalam pembangunan", "Menjaga keamanan", "Semua benar"], a: 3 },
                { q: "Konstitusi adalah?", o: ["Undang-Undang Dasar", "Peraturan Pemerintah", "Keputusan Presiden", "Instruksi Menteri"], a: 0 },
                { q: "Kelompok agama, suku, dan budaya yang berbeda harus hidup dalam?", o: ["Perbedaan", "Persatuan", "Konflik", "Pertentangan"], a: 1 }
            ],
            ekonomi: [
                { q: "Apa yang dimaksud dengan permintaan dalam ekonomi?", o: ["Jumlah barang yang dimiliki penjual", "Keinginan dan kemampuan membeli barang pada berbagai harga", "Harga barang di pasar", "Jumlah barang yang diproduksi"], a: 1 },
                { q: "Hukum permintaan menyatakan bahwa, ceteris paribus, ketika harga naik maka...", o: ["Permintaan naik", "Permintaan turun", "Penawaran turun", "Penawaran naik"], a: 1 },
                { q: "Apa kepanjangan dari GDP?", o: ["Gross Domestic Product", "General Domestic Product", "Gross Domestic Production", "General Domestic Production"], a: 0 },
                { q: "Bank sentral di Indonesia bernama?", o: ["Bank Indonesia", "Bank Sentral Nasional", "Bank Negara", "Bank Republik"], a: 0 },
                { q: "Inflasi adalah kondisi di mana...", o: ["Harga barang turun", "Harga barang naik secara umum", "Jumlah uang menurun", "Produksi meningkat"], a: 1 },
                { q: "Kebijakan fiskal biasanya dijalankan oleh?", o: ["Bank sentral", "Pemerintah (menerapkan pajak dan belanja)", "Perusahaan swasta", "Masyarakat"], a: 1 },
                { q: "Kebijakan moneter dikelola oleh?", o: ["Bank Indonesia", "Kementerian Keuangan", "DPR", "Kementerian Perdagangan"], a: 0 },
                { q: "Elastisitas harga permintaan mengukur?", o: ["Perubahan penawaran terhadap harga", "Perubahan permintaan terhadap harga", "Jumlah barang yang tersedia", "Pendapatan konsumen"], a: 1 },
                { q: "Jika elastisitas permintaan > 1, permintaan dikatakan?", o: ["Inelastis", "Elastis", "Unit elastis", "Tidak sensitif"], a: 1 },
                { q: "Apa yang dimaksud biaya peluang?", o: ["Biaya produksi barang", "Nilai dari alternatif terbaik yang dikorbankan", "Biaya transportasi", "Biaya tenaga kerja"], a: 1 },
                { q: "Pasar persaingan sempurna memiliki ciri utama?", o: ["Satu penjual dominan", "Banyak penjual dan pembeli serta produk homogen", "Barang unik", "Hambatan masuk yang tinggi"], a: 1 },
                { q: "Subsidi pemerintah biasanya bertujuan untuk?", o: ["Meningkatkan harga produk", "Meringankan beban produsen atau konsumen", "Mengurangi produksi", "Meningkatkan pajak"], a: 1 },
                { q: "Depresiasi mata uang domestik berarti?", o: ["Nilai tukar naik terhadap mata uang asing", "Nilai tukar turun terhadap mata uang asing", "Harga barang turun", "Inflasi berhenti"], a: 1 },
                { q: "Deflasi adalah kondisi di mana?", o: ["Harga umum naik", "Harga umum turun", "Mata uang kehilangan nilai", "Pendapatan meningkat"], a: 1 },
                { q: "Apa itu neraca perdagangan?", o: ["Selisih antara ekspor dan impor suatu negara", "Jumlah total ekspor", "Jumlah total impor", "Total investasi asing"], a: 0 },
                { q: "Tingkat pengangguran mengukur?", o: ["Persentase angkatan kerja yang tidak bekerja tapi mencari kerja", "Jumlah pekerja di pabrik", "Jumlah perusahaan", "Persentase orang yang pensiun"], a: 0 },
                { q: "Permintaan agregat adalah?", o: ["Jumlah permintaan untuk suatu barang tertentu", "Total permintaan barang dan jasa dalam perekonomian", "Permintaan dari satu rumah tangga", "Permintaan luar negeri saja"], a: 1 },
                { q: "Kenaikan suku bunga biasanya akan?", o: ["Meningkatkan investasi", "Mengurangi konsumsi dan investasi", "Meningkatkan inflasi", "Meningkatkan permintaan agregat"], a: 1 },
                { q: "Barang inferior adalah barang yang permintaannya akan ... ketika pendapatan naik?", o: ["Naik", "Turun", "Tetap", "Bergantung harga"], a: 1 },
                { q: "Apa tujuan utama pembangunan ekonomi?", o: ["Meningkatkan pertumbuhan ekonomi, pemerataan, dan kesejahteraan", "Meningkatkan inflasi", "Mengurangi produksi", "Meningkatkan pengangguran"], a: 0 }
            ]
        };

        let currentSubject = '';
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let currentQuestions = [];
        let isLoggedIn = false;
        let currentUsername = '';

        // Handle login - accept any username
        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value.trim();
            const errorEl = document.getElementById('loginError');

            if (username.length > 0) {
                isLoggedIn = true;
                currentUsername = username;
                errorEl.classList.remove('show');
                document.getElementById('loginContainer').classList.add('hidden');
                document.getElementById('quizView').classList.remove('hidden');
                document.getElementById('profileUsername').innerText = username;
                // Generate avatar letter
                const firstLetter = username.charAt(0).toUpperCase();
                document.getElementById('profileAvatar').innerText = firstLetter;
                document.getElementById('username').value = '';
            } else {
                errorEl.classList.add('show');
                errorEl.textContent = 'Masukkan username terlebih dahulu';
            }
        }

        // Toggle profile modal
        function toggleProfile() {
            const modal = document.getElementById('profileModal');
            modal.classList.toggle('active');
        }

        // Close profile if clicked outside
        function closeProfileIfClickedOutside(event) {
            if (event.target.id === 'profileModal') {
                document.getElementById('profileModal').classList.remove('active');
            }
        }

        // Logout
        function handleLogout() {
            isLoggedIn = false;
            currentUsername = '';
            document.getElementById('profileModal').classList.remove('active');
            document.getElementById('quizView').classList.add('hidden');
            document.getElementById('loginContainer').classList.remove('hidden');
            document.getElementById('username').value = '';
            // Reset quiz
            currentQuestionIndex = 0;
            userAnswers = [];
            currentQuestions = [];
            currentSubject = '';
        }

        // Fisher-Yates shuffle helper
        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // ----- Custom modal helpers -----
        function showConfirm(message, title = 'Konfirmasi') {
            return new Promise(resolve => {
                const modal = document.getElementById('confirmModal');
                const titleEl = document.getElementById('confirmTitle');
                const msgEl = document.getElementById('confirmMessage');
                const cancelBtn = document.getElementById('confirmCancel');
                const acceptBtn = document.getElementById('confirmAccept');

                titleEl.innerText = title;
                msgEl.innerText = message;

                // ensure both buttons visible/label reset
                cancelBtn.style.display = 'inline-block';
                acceptBtn.innerText = 'Ya, Pilih';

                function cleanup() {
                    modal.classList.remove('active');
                    modal.setAttribute('aria-hidden', 'true');
                    cancelBtn.removeEventListener('click', onCancel);
                    acceptBtn.removeEventListener('click', onAccept);
                    document.removeEventListener('keydown', onKey);
                }

                function onCancel() { cleanup(); resolve(false); }
                function onAccept() { cleanup(); resolve(true); }
                function onKey(e) { if (e.key === 'Escape') onCancel(); }

                cancelBtn.addEventListener('click', onCancel);
                acceptBtn.addEventListener('click', onAccept);
                document.addEventListener('keydown', onKey);

                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
            });
        }

        function showAlert(message, title = 'Perhatian') {
            return new Promise(resolve => {
                const modal = document.getElementById('confirmModal');
                const titleEl = document.getElementById('confirmTitle');
                const msgEl = document.getElementById('confirmMessage');
                const cancelBtn = document.getElementById('confirmCancel');
                const acceptBtn = document.getElementById('confirmAccept');

                titleEl.innerText = title;
                msgEl.innerText = message;

                // hide cancel and use accept as OK
                cancelBtn.style.display = 'none';
                const prevLabel = acceptBtn.innerText;
                acceptBtn.innerText = 'OK';

                function cleanup() {
                    modal.classList.remove('active');
                    modal.setAttribute('aria-hidden', 'true');
                    acceptBtn.removeEventListener('click', onOk);
                    document.removeEventListener('keydown', onKey);
                    // restore
                    cancelBtn.style.display = 'inline-block';
                    acceptBtn.innerText = prevLabel;
                }

                function onOk() { cleanup(); resolve(true); }
                function onKey(e) { if (e.key === 'Escape') onOk(); }

                acceptBtn.addEventListener('click', onOk);
                document.addEventListener('keydown', onKey);

                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
            });
        }

        function startQuiz(subject) {
            currentSubject = subject;
            currentQuestionIndex = 0;
            // prepare a shuffled copy of questions for this session
            currentQuestions = quizData[subject].map(q => ({ q: q.q, o: [...q.o], a: q.a }));
            shuffleArray(currentQuestions);
            userAnswers = new Array(currentQuestions.length);

            document.getElementById('subjectSelection').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';

            document.getElementById('quizTitle').innerText = "Quiz " + subject.charAt(0).toUpperCase() + subject.slice(1);
            showQuestion();
        }

        function showQuestion() {
            const questions = currentQuestions;
            const question = questions[currentQuestionIndex];
            const optionsContainer = document.getElementById('optionsContainer');
            const questionCounter = document.getElementById('questionCounter');
            const questionBox = document.querySelector('.question-box');

            document.getElementById('questionText').innerText = question.q;
            optionsContainer.innerHTML = '';

            question.o.forEach((option, index) => {
                const div = document.createElement('div');
                div.classList.add('option');
                div.innerText = option;
                div.onclick = () => selectOption(index);
                optionsContainer.appendChild(div);
            });

            // If the user already answered this question, show correct/wrong states and disable options
            const answered = userAnswers[currentQuestionIndex];
            const correctIndex = question.a;
            const opts = optionsContainer.querySelectorAll('.option');
            opts.forEach(o => o.classList.remove('selected', 'correct', 'wrong', 'disabled'));
            if (typeof answered !== 'undefined') {
                if (opts[answered]) opts[answered].classList.add('selected');
                if (opts[correctIndex]) opts[correctIndex].classList.add('correct');
                if (answered !== correctIndex && opts[answered]) opts[answered].classList.add('wrong');
                // lock options so user cannot change answer
                opts.forEach(o => o.classList.add('disabled'));
            }

            questionCounter.innerText = `Pertanyaan ${currentQuestionIndex + 1} dari ${questions.length}`;

            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').style.display =
                currentQuestionIndex < questions.length - 1 ? 'inline-block' : 'none';
            document.getElementById('finishBtn').style.display =
                currentQuestionIndex === questions.length - 1 ? 'inline-block' : 'none';

            // restart animation on question box
            questionBox.classList.remove('animate');
            // force reflow
            void questionBox.offsetWidth;
            questionBox.classList.add('animate');
        }

        async function selectOption(index) {
            // prevent changing answer if already answered
            if (typeof userAnswers[currentQuestionIndex] !== 'undefined') {
                await showAlert('Anda sudah menjawab pertanyaan ini. Jawaban tidak dapat diubah.', 'Perhatian');
                return;
            }

            // confirm selection to reduce chance of cheating / misclick
            const ok = await showConfirm('Anda yakin memilih jawaban ini?', 'Konfirmasi');
            if (!ok) return;

            // record answer
            userAnswers[currentQuestionIndex] = index;

            // update UI classes for selected / correct / wrong
            const options = document.querySelectorAll('.option');
            options.forEach(o => o.classList.remove('selected', 'correct', 'wrong'));
            if (options[index]) options[index].classList.add('selected');

            const correctIndex = currentQuestions[currentQuestionIndex].a;
            if (options[correctIndex]) options[correctIndex].classList.add('correct');
            if (index !== correctIndex && options[index]) options[index].classList.add('wrong');

            // lock options after answering
            options.forEach(o => o.classList.add('disabled'));
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            const questions = currentQuestions;
            let score = 0;

            questions.forEach((q, i) => {
                if (userAnswers[i] === q.a) score++;
            });

            const percentage = Math.round((score / questions.length) * 100);
            let message = '';

            if (percentage === 100) message = "Sempurna! üéâ";
            else if (percentage >= 80) message = "Hebat! üí™";
            else if (percentage >= 60) message = "Bagus! Terus belajar! üìö";
            else message = "Jangan menyerah, coba lagi! üí°";

            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            document.getElementById('resultMessage').innerText = message;

            // animated count-up for score
            animateCount('resultScore', percentage);

            // Save to history
            saveToHistory(currentSubject, percentage);
        }

        // small helper to animate numbers
        function animateCount(id, target) {
            const el = document.getElementById(id);
            el.innerText = '0%';
            let current = 0;
            const duration = 900; // ms
            const steps = Math.max(12, Math.floor(duration / 20));
            const step = Math.max(1, Math.floor(target / steps));
            const interval = setInterval(() => {
                current += step;
                if (current >= target) {
                    current = target;
                    clearInterval(interval);
                }
                el.innerText = `${current}%`;
            }, Math.round(duration / steps));
        }

        function backToMenu() {
            document.getElementById('subjectSelection').style.display = 'grid';
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'none';

            // Reset animations / active states
            document.querySelectorAll('.subject-card').forEach(c => c.classList.remove('active'));
        }

        // --- Dashboard & History Management ---
        function saveToHistory(subject, score) {
            const history = JSON.parse(localStorage.getItem('quizHistory') || '[]');
            history.unshift({
                subject: subject.charAt(0).toUpperCase() + subject.slice(1),
                score: score,
                date: new Date().toLocaleString('id-ID')
            });
            // keep only last 20 records
            if (history.length > 20) history.pop();
            localStorage.setItem('quizHistory', JSON.stringify(history));
        }

        function getHistory() {
            return JSON.parse(localStorage.getItem('quizHistory') || '[]');
        }

        function toggleDashboard() {
            const modal = document.getElementById('dashboardModal');
            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                updateDashboard();
            }
        }

        function closeDashboardIfClickedOutside(event) {
            if (event.target.id === 'dashboardModal') {
                document.getElementById('dashboardModal').classList.remove('active');
            }
        }

        function updateDashboard() {
            const history = getHistory();
            const totalAttempts = history.length;
            const avgScore = totalAttempts > 0 
                ? Math.round(history.reduce((sum, item) => sum + item.score, 0) / totalAttempts)
                : 0;

            document.getElementById('totalAttempts').innerText = totalAttempts;
            document.getElementById('avgScore').innerText = avgScore + '%';

            const historyList = document.getElementById('historyList');
            if (history.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999; padding: 10px;">Belum ada riwayat</div>';
            } else {
                historyList.innerHTML = history.map(item => 
                    `<div class="history-item">
                        <span class="history-subject">${item.subject}</span> 
                        <span class="history-score">${item.score}% ‚Ä¢ ${item.date}</span>
                    </div>`
                ).join('');
            }
        }

        function clearHistory() {
            if (confirm('Yakin ingin menghapus semua riwayat kuis?')) {
                localStorage.removeItem('quizHistory');
                updateDashboard();
            }
        }
    </script>
    </div>
</body>
</html>